webpackJsonp([6],{"3fs2":function(e,t,a){var r=a("RY/4"),s=a("dSzd")("iterator"),i=a("/bQp");e.exports=a("FeBl").getIteratorMethod=function(e){if(void 0!=e)return e[s]||e["@@iterator"]||i[r(e)]}},BO1k:function(e,t,a){e.exports={default:a("fxRn"),__esModule:!0}},MLzM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("BO1k"),s=a.n(r),i=a("mtWM"),o=a.n(i),l={name:"orderlist",data:function(){return{formLabelWidth:"100px",formInline:{region:""},updataOrder:{time:"",hospital:"",servicePersonal:"",category:"",remarks:"",serviceName:"",serviceMobile:""},hospitalOptions:[{value:"1",label:"北京协和"},{value:"2",label:"中日友好"},{value:"3",label:"解放军301"}],categoryOptions:[{value:"1",label:"普通"},{value:"2",label:"专家"},{value:"3",label:"特区"},{value:"4",label:"国际"},{value:"5",label:"无"}],options:[{value:"1",label:"待服务"},{value:"2",label:"已完成"}],servicePersonalOptions:[],optionsChildren:[{value:"2",label:"已完成"}],tableData:[],baseURl:"http://apitest.tianyushangyi.com",currentPage:1,currentSize:10,centerDialogVisible:!1,historyVisible:!1,token:"",orderId:"",nameOrMobile:"",orderTime:"",end:"",start:"",historyList:[],pageNum:0}},methods:{getHistoryById:function(e){var t=this;this.historyVisible=!0;var a=localStorage.getItem("currentUser_token");o.a.defaults.headers.get.token=a,o()({method:"get",url:t.baseURl+"/appointservice/updatehistory?id="+e}).then(function(e){"0"==e.data.code&&(t.historyList=e.data.data)})},handleSizeChange:function(e){this.currentSize=e,this.getExecuteList()},changeType:function(e){var t=this,a=localStorage.getItem("currentUser_token");o.a.defaults.headers.get.token=a,o()({method:"get",url:t.baseURl+"/appointservice/setappointservicetofinished?id="+e}).then(function(e){"0"==e.data.code&&t.getExecuteList()})},handleCurrentChange:function(e){this.currentPage=e,this.getExecuteList()},handlecompile:function(e,t,a){console.log(t),this.$router.push({name:"ServiceOrderDetails",params:{task_id:t,token_TO:localStorage.getItem("currentUser_token"),status_TO:a}})},getExecuteList:function(){var e=this,t=localStorage.getItem("currentUser_token"),a={pageSize:this.currentSize,pageNum:this.currentPage,query:{status:this.formInline.region,userInfo:this.nameOrMobile,start:this.start,end:this.end}};o.a.defaults.headers.post.token=t,o()({method:"post",url:this.baseURl+"/appointservice/schedulelist",data:a}).then(function(t){"0"==t.data.code&&(e.tableData=t.data.data.rows,e.pageNum=parseInt(t.data.data.total))})},sureUpdateOrder:function(){var e=this,t=this.updataOrder;console.log(t);var a=localStorage.getItem("currentUser_token"),r={id:this.orderId,serviceDate:t.time,visitAddress:"",visitType:"",remark:""};r.remark=t.remarks,console.log(r.remark);var i=!0,l=!1,n=void 0;try{for(var c,u=s()(this.categoryOptions);!(i=(c=u.next()).done);i=!0){var d=c.value;d.value==t.category&&(r.visitType=d.label)}}catch(e){l=!0,n=e}finally{try{!i&&u.return&&u.return()}finally{if(l)throw n}}var v=!0,p=!1,m=void 0;try{for(var h,f=s()(this.hospitalOptions);!(v=(h=f.next()).done);v=!0){var b=h.value;b.value==t.hospital&&(r.visitAddress=b.label)}}catch(e){p=!0,m=e}finally{try{!v&&f.return&&f.return()}finally{if(p)throw m}}r.serviceMobile=t.serviceMobile,r.serviceName=t.serviceName,o.a.defaults.headers.post.token=a,o()({method:"post",url:this.baseURl+"/appointservice/updatescheduleappoint",data:r}).then(function(t){"0"==t.data.code&&(e.getExecuteList(),e.centerDialogVisible=!1)})},updateReservations:function(e,t){if("已完成"!==t){this.centerDialogVisible=!0;var a=this.tableData[e];this.orderId=a.id,this.updataOrder.time=a.serviceDate,this.hospitalOptions;var r=!1,i=!0,o=!1,l=void 0;try{for(var n,c=s()(this.hospitalOptions);!(i=(n=c.next()).done);i=!0){var u=n.value;u.label==a.visitAddress&&(this.updataOrder.hospital=u.value,r=!0)}}catch(e){o=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw l}}r||(this.updataOrder.hospital=""),r=!1;var d=!0,v=!1,p=void 0;try{for(var m,h=s()(this.categoryOptions);!(d=(m=h.next()).done);d=!0){var f=m.value;f.label==a.visitType&&(this.updataOrder.category=f.value,r=!0)}}catch(e){v=!0,p=e}finally{try{!d&&h.return&&h.return()}finally{if(v)throw p}}r||(this.updataOrder.category=""),this.updataOrder.remarks=a.remark,this.updataOrder.serviceName=a.serviceName,this.updataOrder.serviceMobile=a.serviceMobile}else this.$message.warning("服务已经完成，不能再进行修改")},getDockerList:function(){var e=this,t=localStorage.getItem("currentUser_token"),a=new FormData;a.append("pageSize",1e4),a.append("pageNum",1),o.a.defaults.headers.post.token=t;o.a.post(e.baseURl+"/user/docker",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(200==t.status)for(var a=t.data.data.rows,r=0;r<a.length;r++)e.servicePersonalOptions.push({value:a[r].id,label:a[r].name})}).catch(function(e){console.log(e)})}},mounted:function(){this.getDockerList(),this.getExecuteList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"orderlist"},[a("el-header",{staticStyle:{height:"100%"}},[a("el-row",[a("div",{staticClass:"ty-header-list2"},[a("el-col",{attrs:{span:24}},[a("i",{staticClass:"el-icon-search"}),e._v("筛选查询")])],1),e._v(" "),a("div",{staticClass:"ty-header-list3"},[a("div",{staticClass:"ty-shaoxuan-content"},[a("div",{staticClass:"ty-shaixuan-list1"},[a("span",[e._v("就诊人信息：")]),e._v(" "),a("el-input",{staticClass:"searchBox",attrs:{placeholder:"就诊人员/就诊人员手机号"},model:{value:e.nameOrMobile,callback:function(t){e.nameOrMobile=t},expression:"nameOrMobile"}}),e._v(" "),a("span",[e._v("就诊开始-结束：")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}}),e._v(" "),a("span",[e._v("服务状态：")]),e._v(" "),a("el-select",{model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.options,function(e){return a("el-option",{attrs:{value:e.value,label:e.label}})})),e._v(" "),a("el-button",{on:{click:e.getExecuteList}},[e._v("筛选")])],1)])])])],1),e._v(" "),a("el-main",[a("div",{staticClass:"ty-header-list2"},[a("el-col",{attrs:{span:24}},[a("i",{staticClass:"el-icon-document"}),e._v(" 服务执行排期表")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"no",label:"排期编号",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceDate",label:"就诊时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"visitAddress",label:"就诊地点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.visitAddress,expression:"!scope.row.visitAddress"}]},[e._v("无")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.visitAddress,expression:"scope.row.visitAddress"}]},[e._v(e._s(t.row.visitAddress))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"visitType",label:"就诊类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.visitType,expression:"!scope.row.visitType"}]},[e._v("无")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.visitType,expression:"scope.row.visitType"}]},[e._v(e._s(t.row.visitType))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceName",label:"陪诊人员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.serviceName,expression:"!scope.row.serviceName"}]},[e._v("无")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.serviceName,expression:"scope.row.serviceName"}]},[e._v(e._s(t.row.serviceName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceMobile",label:"电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.serviceMobile,expression:"!scope.row.serviceMobile"}]},[e._v("无")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.serviceMobile,expression:"scope.row.serviceMobile"}]},[e._v(e._s(t.row.serviceMobile))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"服务项"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.productName,expression:"!scope.row.productName"}]},[e._v("无")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.productName,expression:"scope.row.productName"}]},[e._v(e._s(t.row.productName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.remark,expression:"!scope.row.remark"}]},[e._v("无")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.row.remark,expression:"scope.row.remark"}]},[e._v(e._s(t.row.remark))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",label:"服务状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{directives:[{name:"show",rawName:"v-show",value:"已完成"!=t.row.status,expression:"scope.row.status!='已完成'"}],on:{change:function(a){e.changeType(t.row.id)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}},e._l(e.optionsChildren,function(e){return a("el-option",{attrs:{value:e.value,label:e.label}})})),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"已完成"==t.row.status,expression:"scope.row.status=='已完成'"}],staticStyle:{color:"#409EFF"}},[e._v("已完成")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.updateReservations(t.$index,t.row.status)}}},[e._v("修改预约")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handlecompile(t.$index,t.row.serviceOrderId,t.row.status)}}},[e._v("查看订单\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"历史"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.getHistoryById(t.row.id)}}},[e._v("修改历史")])]}}])})],1),e._v(" "),a("div",{staticClass:"pages"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":10,background:"",layout:"sizes,prev, pager, next",total:e.pageNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("div",{staticClass:"button-el-dialog"},[a("el-dialog",{attrs:{modal:!1,title:"修改预约",visible:e.centerDialogVisible,width:"25%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",{attrs:{model:e.updataOrder}},[a("el-form-item",{attrs:{label:"就诊时间","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.updataOrder.time,callback:function(t){e.$set(e.updataOrder,"time",t)},expression:"updataOrder.time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务人员姓名","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.updataOrder.serviceName,callback:function(t){e.$set(e.updataOrder,"serviceName",t)},expression:"updataOrder.serviceName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务人员电话","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.updataOrder.serviceMobile,callback:function(t){e.$set(e.updataOrder,"serviceMobile",t)},expression:"updataOrder.serviceMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"就诊医院","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:e.updataOrder.hospital,callback:function(t){e.$set(e.updataOrder,"hospital",t)},expression:"updataOrder.hospital"}},e._l(e.hospitalOptions,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"就诊类别","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:e.updataOrder.category,callback:function(t){e.$set(e.updataOrder,"category",t)},expression:"updataOrder.category"}},e._l(e.categoryOptions,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.updataOrder.remarks,callback:function(t){e.$set(e.updataOrder,"remarks",t)},expression:"updataOrder.remarks"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureUpdateOrder}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("div",{staticClass:"button-el-dialog"},[a("el-dialog",{attrs:{modal:!1,title:"修改历史",visible:e.historyVisible,width:"25%",center:""},on:{"update:visible":function(t){e.historyVisible=t}}},[a("div",{staticClass:"historyMain"},e._l(e.historyList,function(t,r){return a("div",{staticClass:"historyList"},[a("i",{class:0==r?"focus":"nomal"}),e._v(" "),e._l(t.info,function(t){return""!=t?a("div",{staticClass:"historyAddress"},[e._v("\n              "+e._s(t)+"\n            ")]):e._e()}),e._v(" "),a("div",{staticClass:"historyTime"},[e._v("\n              "+e._s(t.createDate)+"\n            ")])],2)})),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.historyVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.historyVisible=!1}}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,n,!1,function(e){a("WVyc"),a("c07b")},"data-v-0420908e",null);t.default=c.exports},"RY/4":function(e,t,a){var r=a("R9M2"),s=a("dSzd")("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,a,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?a:i?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o}},WVyc:function(e,t){},c07b:function(e,t){},fxRn:function(e,t,a){a("+tPU"),a("zQR9"),e.exports=a("g8Ux")},g8Ux:function(e,t,a){var r=a("77Pl"),s=a("3fs2");e.exports=a("FeBl").getIterator=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}}});
//# sourceMappingURL=6.7ae7f12d04b5b277ee1b.js.map