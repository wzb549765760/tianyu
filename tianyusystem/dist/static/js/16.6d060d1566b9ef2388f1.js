webpackJsonp([16],{Ikm7:function(e,t){},swzU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("IKXC"),a=(i("gSaA"),i("EMXe")),r=i("mtWM"),n=i.n(r),o=i("mw3O"),c=i.n(o),l={components:{ElButton:a.a},name:"v-distpicker",props:{province:{type:[String,Number],default:""},city:{type:[String,Number],default:""},area:{type:[String,Number],default:""},type:{type:String,default:""},hideArea:{type:Boolean,default:!1},onlyProvince:{type:Boolean,default:!1},staticPlaceholder:{type:Boolean,default:!1},placeholders:{type:Object,default:function(){return{province:"省",city:"市",area:"区"}}},disabled:{type:Boolean,default:!1},addressHeader:{type:String,default:"address-header"},addressContainer:{type:String,default:"address-container"}},data:function(){return{delivery:!1,checked1:!1,checked2:!1,form:{date1:""},formInline:{user:"",region:"1"},options3:[{value:"1",label:"用户"},{value:"2",label:"医生"},{value:"3",label:"VIP用户"}],tab:1,options:CityInfo,options2:CityInfo,showCityTab:!1,showAreaTab:!1,provinces:[],cities:[],areas:[],fileList:[],currentProvince:this.determineType(this.province)||this.placeholders.province,currentCity:this.determineType(this.city)||this.placeholders.city,currentArea:this.determineType(this.area)||this.placeholders.area,currentProvince2:this.determineType(this.province)||this.placeholders.province,currentCity2:this.determineType(this.city)||this.placeholders.city,currentArea2:this.determineType(this.area)||this.placeholders.area,nickName:"",mobile:"",pwd:"",name:"",sexRadio:"1",nationality:"",birthday:"",age:"",idCardNumber:"",idCardUrl:"",addDetail1:"",addDetail2:"",selectedOptions:[],selectedOptions2:[],upData:{type:1},headers:{token:localStorage.getItem("currentUser_token")},baseURl:"http://apitest.tianyushangyi.com"}},created:function(){"mobile"!=this.type?(this.provinces=this.getDistricts(),this.cities=this.province?this.getDistricts(this.getAreaCode(this.determineType(this.province))):[],this.areas=this.city?this.getDistricts(this.getAreaCode(this.determineType(this.city),this.area)):[]):!this.area||this.hideArea||this.onlyProvince?this.city&&this.hideArea&&!this.onlyProvince?(this.tab=2,this.showCityTab=!0,this.cities=this.getDistricts(this.getAreaCode(this.determineType(this.province)))):this.provinces=this.getDistricts():(this.tab=3,this.showCityTab=!0,this.showAreaTab=!0,this.areas=this.getDistricts(this.getAreaCode(this.determineType(this.city),this.area)))},watch:{currentProvince:function(e){this.$emit("province",this.setData(e)),this.onlyProvince&&this.emit("selected")},currentCity:function(e){this.$emit("city",this.setData(e,this.currentProvince)),e!=this.placeholders.city&&this.hideArea&&this.emit("selected")},currentArea:function(e){this.$emit("area",this.setData(e,this.currentProvince)),e!=this.placeholders.area&&this.emit("selected")},province:function(e){this.currentProvince=this.province||this.placeholders.province,this.cities=this.determineValue(this.currentProvince,this.placeholders.province)},city:function(e){this.currentCity=this.city||this.placeholders.city,this.areas=this.determineValue(this.currentCity,this.placeholders.city,this.currentProvince)},area:function(e){this.currentArea=this.area||this.placeholders.area}},methods:{backToOne:function(){this.$router.back()},handleRemove:function(e,t){console.log(e,t)},handleSuccess:function(e,t,i){console.log(e);0==e.code&&(this.idCardUrl=e.data.url)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){t=[],this.$message.warning("当前限制选择 1个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},setData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{code:this.getAreaCode(e,t),value:e}},emit:function(e){var t={province:this.setData(this.currentProvince)};this.onlyProvince||this.$set(t,"city",this.setData(this.currentCity)),this.onlyProvince&&!this.hideArea||this.$set(t,"area",this.setData(this.currentArea)),this.$emit(e,t)},getCities:function(){this.currentCity=this.placeholders.city,this.currentArea=this.placeholders.area,this.cities=this.determineValue(this.currentProvince,this.placeholders.province),this.cleanList("areas"),0===this.cities.length&&(this.emit("selected"),this.tab=1,this.showCityTab=!1)},getAreas:function(){this.currentArea=this.placeholders.area,this.areas=this.determineValue(this.currentCity,this.placeholders.city,this.currentProvince),0===this.areas.length&&(this.emit("selected"),this.tab=2,this.showAreaTab=!1)},resetProvince:function(){this.tab=1,this.provinces=this.getDistricts(),this.showCityTab=!1,this.showAreaTab=!1},resetCity:function(){this.tab=2,this.showCityTab=!0,this.showAreaTab=!1,this.getCities()},chooseProvince:function(e){this.currentProvince=e,this.onlyProvince||(this.tab=2,this.showCityTab=!0,this.showAreaTab=!1,this.getCities())},chooseCity:function(e){this.currentCity=e,this.hideArea||(this.tab=3,this.showCityTab=!0,this.showAreaTab=!0,this.getAreas())},chooseArea:function(e){this.currentArea=e},getAreaCodeByPreCode:function(e,t){var i=[];for(var a in s.a)for(var r in s.a[a])e===s.a[a][r]&&i.push(r);if(i.length>1){var n=void 0;return i.forEach(function(e,i){e.slice(0,2)==t&&(n=i)}),i[n]}return i[0]},getAreaCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var i in s.a)for(var a in s.a[i])if(e===s.a[i][a]){if(t.length>0){if(a.slice(0,2)!==this.getAreaCodeByPreCode(t,a.slice(0,2)).slice(0,2))continue;return a}return a}},getCodeValue:function(e){for(var t in s.a)for(var i in s.a[t])if(e===parseInt(i))return s.a[t][i]},getDistricts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e5;return s.a[e]||[]},determineValue:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e===t?[]:this.getDistricts(this.getAreaCode(e,i))},determineType:function(e){return"number"==typeof e?this.getCodeValue(e):e},cleanList:function(e){this[e]=[]},checkVal:function(e){return null!=e&&""!=e&&void 0!=e},userSubmit:function(){var e=this;if(e.checkVal(e.nickName))if(e.checkVal(e.mobile))if(e.checkVal(e.name))if(e.checkVal(e.age)){var t={mobile:e.mobile,password:e.pwd,type:e.formInline.region,nickname:e.nickName,name:e.name,sex:parseInt(e.sexRadio),age:parseInt(e.age),birthday:e.birthday,nationality:e.nationality,idCardNumber:e.idCardNumber,idCardUrl:e.idCardUrl,birthAddress:e.selectedOptions.join("&")+"&"+e.addDetail1,lifeAddress:e.selectedOptions2.join("&")+"&"+e.addDetail2,status:"1",emergencyContact1:e.emergencyContact1,emergencyMobile1:e.emergencyMobile1,emergencyMobile2:e.emergencyMobile2,emergencyContact2:e.emergencyContact2,allergyDiseaseHistory:e.allergyDiseaseHistory,geneticDiseaseHistory:e.geneticDiseaseHistroy,surgeryDiseaseHistory:e.surgeryDiseaseHistory};n.a.defaults.headers.post.token=e.headers.token,n()({method:"post",url:e.baseURl+"/user/add",data:c.a.stringify(t)}).then(function(t){console.log(t),0==t.data.code?(e.$message({message:t.data.desc,type:"success"}),e.$router.push({name:"UserList"})):e.$message({message:t.data.desc,type:"error"})})}else e.$message({message:"年龄不能为空",type:"error"});else e.$message({message:"姓名不能为空",type:"error"});else e.$message({message:"手机号码不能为空",type:"error"});else e.$message({message:"昵称不能为空",type:"error"})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"AddUser"},[i("el-header",[i("div",{staticClass:"ty-header-div1"},[i("p",{staticClass:"ty-headr-p"},[i("span",[e._v("基本信息")])])])]),e._v(" "),i("el-main",[i("div",{staticClass:"ty-el-main-list1"},[i("div",{staticClass:"ty-content"},[i("p",{staticClass:"ty-p-one"},[e._v("账户信息")]),e._v(" "),i("div",{staticClass:"ty-content-div-list"},[i("span",[e._v("  　　昵称：")]),e._v(" "),i("el-input",{attrs:{placeholder:"*必填请输入"},model:{value:e.nickName,callback:function(t){e.nickName=t},expression:"nickName"}}),e._v(" "),i("span",[e._v("  　　手机号码：")]),e._v(" "),i("el-input",{attrs:{placeholder:"*必填请输入"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}})],1),e._v(" "),i("div",{staticClass:"ty-content-div-list"},[i("span",[e._v("  　　密码：")]),e._v(" "),i("el-input",{attrs:{placeholder:"必填请输入"},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}})],1),e._v(" "),i("div",{staticClass:"ty-content-div-list",attrs:{model:e.formInline}},[i("span",[e._v("  　　用户类型：")]),e._v(" "),i("el-select",{model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.options3,function(e){return i("el-option",{attrs:{value:e.value,label:e.label}})}))],1),e._v(" "),i("p",{staticClass:"ty-p-one"},[e._v("详细信息")]),e._v(" "),i("div",{staticClass:"ty-content-div-list"},[i("span",[e._v("  　　姓名：")]),e._v(" "),i("el-input",{attrs:{placeholder:"*必填请输入"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),i("span",[e._v("  　　性别：")]),e._v(" "),i("el-radio",{attrs:{label:"1"},model:{value:e.sexRadio,callback:function(t){e.sexRadio=t},expression:"sexRadio"}},[e._v("男")]),e._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:e.sexRadio,callback:function(t){e.sexRadio=t},expression:"sexRadio"}},[e._v("女")]),e._v(" "),i("span",[e._v("  　　民族：")]),e._v(" "),i("el-input",{model:{value:e.nationality,callback:function(t){e.nationality=t},expression:"nationality"}})],1),e._v(" "),i("div",{staticClass:"ty-content-div-list",attrs:{model:e.form}},[i("span",[e._v("  　　年龄：")]),e._v(" "),i("el-input",{attrs:{placeholder:"*必填请输入"},model:{value:e.age,callback:function(t){e.age=t},expression:"age"}}),e._v(" "),i("span",[e._v("  　　生日：")]),e._v(" "),i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.birthday,callback:function(t){e.birthday=t},expression:"birthday"}})],1),e._v(" "),i("div",{staticClass:"distpicker-address-wrapper ty-distpicker"},[i("span",[e._v("　　现居地：")]),e._v(" "),i("el-cascader",{attrs:{options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}}),e._v(" "),i("el-input",{attrs:{placeholder:"详细地址"},model:{value:e.addDetail1,callback:function(t){e.addDetail1=t},expression:"addDetail1"}})],1),e._v(" "),i("div",{staticClass:"distpicker-address-wrapper ty-distpicker"},[i("span",[e._v("　　户籍地：")]),e._v(" "),i("el-cascader",{attrs:{options:e.options2},on:{change:e.handleChange},model:{value:e.selectedOptions2,callback:function(t){e.selectedOptions2=t},expression:"selectedOptions2"}}),e._v(" "),i("el-input",{attrs:{placeholder:"详细地址"},model:{value:e.addDetail2,callback:function(t){e.addDetail2=t},expression:"addDetail2"}})],1),e._v(" "),i("div",{staticClass:"ty-content-div-list",attrs:{model:e.form}},[i("span",[e._v("  　　身份证号：")]),e._v(" "),i("el-input",{model:{value:e.idCardNumber,callback:function(t){e.idCardNumber=t},expression:"idCardNumber"}})],1),e._v(" "),i("div",{staticClass:"ty-content-div-list",attrs:{model:e.form}},[i("span",[e._v("  　　身份证正面：")]),e._v(" "),i("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"http://apitest.tianyushangyi.com/file/upload",headers:e.headers,data:e.upData,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-remove":e.beforeRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)])])]),e._v(" "),i("el-footer",[i("div",{staticClass:"ty-right-anniu"},[i("el-button",{on:{click:e.userSubmit}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:e.backToOne}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var h=i("VU/8")(l,d,!1,function(e){i("Ikm7"),i("uc2M")},null,null);t.default=h.exports},uc2M:function(e,t){}});
//# sourceMappingURL=16.6d060d1566b9ef2388f1.js.map