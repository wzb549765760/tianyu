webpackJsonp([22],{EdV2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=a("mtWM"),o=a.n(d),i=a("mw3O"),s=a.n(i),l={name:"momney",data:function(){return{formInline:{},docAdd:{name:"",detail:"",desc:"",img:"",isDelete:!1,type:"5"},formLabelWidth:"100px",dialogVisible:!1,addShow:!1,editShow:!1,tableData2:[],tableData3:[],radio3:"医生",fileList:[],token:"",url:"http://apitest.tianyushangyi.com",currentPage1:1,currentSize:10,total:0,radio:"1",upData:{type:3},headers:{token:localStorage.getItem("currentUser_token")}}},methods:{handlePreview:function(e){console.log(e)},handleRemove:function(e,t){console.log(e,t)},handleSuccess:function(e,t,a){0==e.code&&(this.docAdd.img=e.data.url)},beforeRemove:function(e,t){},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG/JPEG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleExceed:function(e,t){t=[],this.$message.warning("当前限制选择 1个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e);this.currentPage1=e,"医生"===this.radio3?this.getList():"医院"===this.radio3&&this.getHosList()},tabChange:function(e){console.log(e);this.currentPage1=1,"医院"===e?this.getHosList():"医生"===e&&this.getList()},submit:function(){if(this.docAdd.name&&this.docAdd.desc&&this.docAdd.detail&&this.docAdd.img){var e=this,t=localStorage.getItem("currentUser_token"),a=e.docAdd;o.a.defaults.headers.get.token=t,o()({method:"post",url:e.url+"/resource/add",data:s.a.stringify(a)}).then(function(t){0==t.data.code?(e.$message.success("提交成功"),e.docAdd={name:"",detail:"",desc:"",img:"",isDelete:!1,type:"5"},e.fileList=[],e.addShow=!e.addShow,e.getList()):e.$message.error(t.data.desc)})}else this.$message.error("请填写完整信息")},submit1:function(){if(this.docAdd.name&&this.docAdd.desc&&this.docAdd.detail&&this.docAdd.img){var e=this,t=e.docAdd;localStorage.getItem("currentUser_token");o()({method:"post",url:e.url+"/resource/update",data:s.a.stringify(t)}).then(function(t){0==t.data.code?(e.$message.success("修改成功"),e.editShow=!e.editShow,"医院"==e.radio3?e.getHosList():e.getList()):e.$message.error(t.data.desc)})}else this.$message.error("请填写完整信息")},addTab:function(){this.docAdd={name:"",detail:"",desc:"",img:"",isDelete:!1,type:"5"},this.fileList=[],this.addShow=!this.addShow},editTab:function(){this.editShow=!this.editShow},edit:function(e){this.editShow=!this.editShow,this.docAdd.createTime=e.createTime,this.docAdd.detail=e.detail,this.docAdd.id=e.id,this.docAdd.order=e.order,this.docAdd.updateTime=e.updateTime,this.docAdd.name=e.name,this.docAdd.desc=e.desc,this.docAdd.img=e.img,this.docAdd.isDelete=e.isDelete,this.docAdd.type=e.type,"医生"===e.type?this.docAdd.type="5":this.docAdd.type="6"},delete1:function(e){var t=this,a={id:e.id},d=localStorage.getItem("currentUser_token");o.a.defaults.headers.get.token=d,o()({method:"post",url:t.url+"/resource/delete",data:s.a.stringify(a)}).then(function(e){0==e.data.code?(t.$message.success("删除成功"),t.getList(),t.getHosList()):t.$message.error(e.data.desc)})},getToken:function(){this.token=localStorage.getItem("currentUser_token")},getList:function(){var e=this;e.tableData2=[];var t={type:5,pageNum:e.currentPage1,pageSize:e.currentSize};o.a.defaults.headers.post.token=localStorage.getItem("currentUser_token"),o()({method:"post",url:e.url+"/resource/list",data:s.a.stringify(t)}).then(function(t){0==t.data.code&&(e.tableData2=t.data.data.rows,console.log(e.tableData2),e.total=t.data.data.total,console.log(e.tableData2),e.tableData2.forEach(function(e,t){return e.type="医生",e}),e.tableData2.sort(function(e,t){return Date.parse(e.createTime.replace(/-/g,"/"))-Date.parse(t.createTime.replace(/-/g,"/"))}))})},getHosList:function(){var e=this,t={type:6,pageNum:e.currentPage1,pageSize:e.currentSize};o.a.defaults.headers.post.token=localStorage.getItem("currentUser_token"),o()({method:"post",url:e.url+"/resource/list",data:s.a.stringify(t)}).then(function(t){0==t.data.code&&(e.tableData3=t.data.data.rows,e.total=t.data.data.total,e.tableData3.forEach(function(e,t){e.type="医院"}),e.tableData2=e.tableData3,e.tableData2.sort(function(e,t){return Date.parse(e.createTime.replace(/-/g,"/"))-Date.parse(t.createTime.replace(/-/g,"/"))}))})},handleAdd:function(e,t){this.docAdd={name:"",detail:"",desc:"",img:"",isDelete:!1,type:"5"},this.fileList=[],this.addShow=!0,this.dialogVisible=!0}},created:function(){this.getToken()},mounted:function(){this.getList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[e._v("医生/医院管理\n    "),a("div",{staticClass:"ty-service-add"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1)]),e._v(" "),a("el-main",[a("el-radio-group",{on:{change:e.tabChange},model:{value:e.radio3,callback:function(t){e.radio3=t},expression:"radio3"}},[a("el-radio-button",{staticStyle:{width:"70px"},attrs:{label:"医生"}}),e._v(" "),a("el-radio-button",{attrs:{label:"医院"}})],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2,border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",resizable:!1,align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型",resizable:!1,align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",resizable:!1,label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail",align:"center",resizable:!1,label:"特色"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"desc",align:"center",resizable:!1,label:"简介"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",resizable:!1,label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"110px"},attrs:{src:e.row.img,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",align:"center",resizable:!1,label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"see-dd",on:{click:function(a){e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("span",{staticClass:"see-dd",on:{click:function(a){e.delete1(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.addShow,expression:"addShow"}],staticClass:"serves-add"},[a("div",[a("div",[a("label",{staticStyle:{"text-align":"center",width:"100%","font-size":"20px"}},[e._v("医生/医院信息")])]),e._v(" "),a("div",[a("label",[e._v("   类   型 : ")]),e._v(" "),a("el-radio",{attrs:{label:"5"},model:{value:e.docAdd.type,callback:function(t){e.$set(e.docAdd,"type",t)},expression:"docAdd.type"}},[a("span",{staticStyle:{"font-size":"18px !important"}},[e._v("医生")])]),e._v(" "),a("el-radio",{attrs:{label:"6"},model:{value:e.docAdd.type,callback:function(t){e.$set(e.docAdd,"type",t)},expression:"docAdd.type"}},[a("span",{staticStyle:{"font-size":"18px !important"}},[e._v("医院")])])],1),e._v(" "),a("div",[a("label",[e._v("   名   称 : ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.docAdd.name,expression:"docAdd.name"}],attrs:{type:"text",placeholder:"请输入医生姓名或医院名称"},domProps:{value:e.docAdd.name},on:{input:function(t){t.target.composing||e.$set(e.docAdd,"name",t.target.value)}}})]),e._v(" "),a("div",[a("label",[e._v("   特   色 : ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.docAdd.detail,expression:"docAdd.detail"}],attrs:{type:"text",maxlength:"20",placeholder:"请输入医生/医院特色（不超过20字）"},domProps:{value:e.docAdd.detail},on:{input:function(t){t.target.composing||e.$set(e.docAdd,"detail",t.target.value)}}})]),e._v(" "),a("div",[a("label",[e._v("   简   介 : ")]),e._v(" "),a("el-input",{staticStyle:{width:"360px"},attrs:{type:"textarea",rows:6,placeholder:"请输入医生/医院的简介（150字以内）",maxlength:150},model:{value:e.docAdd.desc,callback:function(t){e.$set(e.docAdd,"desc",t)},expression:"docAdd.desc"}})],1),e._v(" "),a("div",[a("label",[e._v("   头像/照片 : ")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://apitest.tianyushangyi.com/file/upload",headers:e.headers,data:e.upData,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-remove":e.beforeRemove,"before-upload":e.beforeAvatarUpload,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),e._v(" "),a("div",{staticClass:"add-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.addTab}},[e._v("取消")])],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editShow,expression:"editShow"}],staticClass:"serves-add"},[a("div",[a("div",[a("label",{staticStyle:{"text-align":"center",width:"100%","font-size":"20px"}},[e._v("医生/医院信息")])]),e._v(" "),a("div",[a("label",[e._v("   类   型 : ")]),e._v(" "),a("el-radio",{attrs:{label:"5",disabled:""},model:{value:e.docAdd.type,callback:function(t){e.$set(e.docAdd,"type",t)},expression:"docAdd.type"}},[a("span",{staticStyle:{"font-size":"18px !important"}},[e._v("医生")])]),e._v(" "),a("el-radio",{attrs:{label:"6",disabled:""},model:{value:e.docAdd.type,callback:function(t){e.$set(e.docAdd,"type",t)},expression:"docAdd.type"}},[a("span",{staticStyle:{"font-size":"18px !important"}},[e._v("医院")])])],1),e._v(" "),a("div",[a("label",[e._v("   名   称 : ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.docAdd.name,expression:"docAdd.name"}],attrs:{type:"text",placeholder:"请输入医生姓名或医院名称"},domProps:{value:e.docAdd.name},on:{input:function(t){t.target.composing||e.$set(e.docAdd,"name",t.target.value)}}})]),e._v(" "),a("div",[a("label",[e._v("   特   色 : ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.docAdd.detail,expression:"docAdd.detail"}],attrs:{type:"text",maxlength:"20",placeholder:"请输入医生/医院特色（不超过20字）"},domProps:{value:e.docAdd.detail},on:{input:function(t){t.target.composing||e.$set(e.docAdd,"detail",t.target.value)}}})]),e._v(" "),a("div",[a("label",[e._v("   简   介 : ")]),e._v(" "),a("el-input",{staticStyle:{width:"360px"},attrs:{type:"textarea",rows:6,placeholder:"请输入医生/医院的简介（150字以内）",maxlength:150},model:{value:e.docAdd.desc,callback:function(t){e.$set(e.docAdd,"desc",t)},expression:"docAdd.desc"}})],1),e._v(" "),a("div",[a("label",[e._v("   头像/照片 : ")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://apitest.tianyushangyi.com/file/upload",headers:e.headers,data:e.upData,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-remove":e.beforeRemove,"before-upload":e.beforeAvatarUpload,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})],1)],1),e._v(" "),a("div",{staticClass:"add-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit1}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.editTab}},[e._v("取消")])],1)])]),e._v(" "),a("el-footer",[a("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next","current-page":e.currentPage1,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,n,!1,function(e){a("kuMA")},"data-v-9ac556cc",null);t.default=r.exports},kuMA:function(e,t){}});
//# sourceMappingURL=22.a00d94b50a8df35d7771.js.map