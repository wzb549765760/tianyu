webpackJsonp([15],{BUf0:function(e,t){},HkMy:function(e,t){},ZB0j:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mtWM"),o=a.n(l),s={data:function(){return{params:this.$route.params,baseURl:"http://apitest.tianyushangyi.com",token:"",status:"",userShow:!0,tableData5:[],tableData4:[],tableData3:[],tableData31:[],tableDate1:{},tableData2:[],tableData1:[],tableData:[],footerShow:!0,content:""}},methods:{gettoken:function(){this.token=localStorage.getItem("currentUser_token")},goBack:function(){history.go(-1)},sublist:function(){var e=this,t=e.params.token_TO;o.a.defaults.headers.post.token=t,o()({method:"post",url:e.baseURl+"/purchaseorder/detail?id="+e.params.task_id,data:""}).then(function(t){"0"==t.data.code?(console.log(t),"货物"==t.data.data.commodityType?e.footerShow=!1:"服务中"==t.data.data.orderInfo.status&&(e.footerShow=!1),""!=t.data.data.orderInfo&&null!=t.data.data.orderInfo&&void 0!=t.data.data.orderInfo&&""==t.data.data.orderInfo.name&&(t.data.data.orderInfo.name="无"),e.tableData1.push(t.data.data.orderInfo),e.tableData4.push(t.data.data.purchaseInfo),e.tableData5=t.data.data.purchaseInfo.specificationDetail.spec2prod,e.tableData3.push(t.data.data.servicePeople),t.data.data.servicePeople?e.userShow=!0:e.userShow=!1,e.tableDate1=t.data.data.servicePeople,e.tableData31.push(t.data.data.address),console.log(e.tableData31),e.tableData.push(t.data.data.purchaseInfo.specificationDetail),t.data.data.isInvoice&&(null==t.data.data.invoiceInfo?e.tableData2.push({name:"",mobile:"",no:"",source:"",status:"",totalPrice:"",createDate:""}):(e.tableData2.push(t.data.data.invoiceInfo),console.log(e.tableData2)))):e.$message({message:"请求失败",type:"error"})})},Confirmorder:function(){var e=this,t=e.params.token_TO;o.a.defaults.headers.post.token=t;var a=e.tableData3,l=e.tableData2,s={},r={};if(a.map(function(e,t){s=e}),l.map(function(e,t){r=e}),console.log(s,r),e.tableData3.length>0&&null!=s&&void 0!=s)if("男"==s.sex)s.sex=1;else if("女"==s.sex)s.sex=2;else if(1!=s.sex&&2!=s.sex)return void e.$message({message:"请正确填写性别",type:"error"});var n={id:e.params.task_id,servicePeople:s,invoice:r,remark:e.content};o()({method:"post",url:e.baseURl+"/purchaseorder/confirm",data:n}).then(function(t){0==t.data.code?(e.$message({message:"确认成功",type:"success"}),e.$router.push({path:"/orderlist"})):e.$message({message:t.data.desc,type:"error"})})},confirstatus:function(){"服务中"!=this.status&&("未付款"==this.status?this.$message({message:"未付款状态不能点击确定订单按钮",type:"error"}):"已付款"==this.status&&this.Confirmorder())}},mounted:function(){this.sublist(),this.gettoken(),this.status=this.params.status_TO}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"orderlineitem"},[a("el-header",[a("div",{staticClass:"ty-el-header"},[a("el-col",{attrs:{span:24}},[a("i",{staticClass:"el-icon-date"}),e._v(" 当前订单状态："),a("span",[e._v(e._s(this.status))])])],1)]),e._v(" "),a("el-main",[a("div",{staticClass:"ty-listone"},[a("div",{staticClass:"ty-el-main"},[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-date"}),e._v("订单信息")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData1,border:""}},[a("el-table-column",{attrs:{prop:"no",label:"订单编号",resizable:!1,width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",resizable:!1,label:"用户账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",resizable:!1,label:"用户姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",resizable:!1,label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",resizable:!1,label:"订单状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"source",resizable:!1,label:"来源"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPrice",resizable:!1,label:"总价"}})],1)],1),e._v(" "),a("div",{staticClass:"ty-listone"},[a("div",{staticClass:"ty-el-main"},[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-date"}),e._v("商品信息")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData4,border:""}},[a("el-table-column",{attrs:{prop:"no",resizable:!1,label:"编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"picPath",resizable:!1,label:"商品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{display:"block",width:"60px",height:"50px",margin:"0 auto"},attrs:{src:e.row.picPath}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"commodityName",resizable:!1,label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",resizable:!1,label:"数量"}}),e._v(" "),a("el-table-column",{attrs:{data:e.tableData,resizable:!1,label:"规格名称"},scopedSlots:e._u([e._l(e.tableData,function(t){return{key:"default",fn:function(l){return[a("span",[e._v(e._s(t.name))])]}}})])}),e._v(" "),a("el-table-column",{attrs:{data:e.tableData5,resizable:!1,label:"规格详细信息"},scopedSlots:e._u([e._l(e.tableData5,function(t){return{key:"default",fn:function(l){return[a("span",[e._v(e._s(t.productName))]),e._v(":"),a("span",[e._v(e._s(t.count))])]}}})])})],1)],1),e._v(" "),a("div",{staticClass:"ty-listone"},[a("div",{staticClass:"ty-el-main"},[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-date"}),e._v("产品使用人信息")])],1),e._v(" "),e.userShow?a("el-table",{key:"1",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData3,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"使用人",resizable:!1,width:"180","show-overflow-tooltip":!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",resizable:!1,label:"用户账号","show-overflow-tooltip":!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.mobile,callback:function(a){e.$set(t.row,"mobile",a)},expression:"scope.row.mobile"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"age",resizable:!1,label:"年龄","show-overflow-tooltip":!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.age,callback:function(a){e.$set(t.row,"age",a)},expression:"scope.row.age"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardNum",resizable:!1,label:"身份证号","show-overflow-tooltip":!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.idCardNum,callback:function(a){e.$set(t.row,"idCardNum",a)},expression:"scope.row.idCardNum"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"idCardUrl",resizable:!1,label:"身份证正面","show-overflow-tooltip":!1},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{display:"block",width:"50px",height:"50px",margin:"0 auto"},attrs:{src:t.row.idCardUrl+"&token="+e.params.token_TO}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",resizable:!1,label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:1==t.row.sex?"男":"女",callback:function(a){e.$set(t.row,"sex==1?'男':'女'",a)},expression:"scope.row.sex==1?'男':'女' "}})]}}])})],1):e._e(),e._v(" "),e.userShow?e._e():a("el-table",{key:"3",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData31,border:""}},[a("el-table-column",{attrs:{prop:"name",resizable:!1,label:"使用人",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",resizable:!1,label:"使用人电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.mobile,callback:function(a){e.$set(t.row,"mobile",a)},expression:"scope.row.mobile"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",resizable:!1,label:"地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.address,callback:function(a){e.$set(t.row,"address",a)},expression:"scope.row.address"}})]}}])})],1)],1),e._v(" "),a("div",{staticClass:"ty-listone"},[a("div",{staticClass:"ty-el-main"},[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-date"}),e._v("发票信息")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData2,border:""}},[a("el-table-column",{attrs:{prop:"content",resizable:!1,label:"发票内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.content,callback:function(a){e.$set(t.row,"content",a)},expression:"scope.row.content"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",resizable:!1,label:"单位名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",resizable:!1,label:"发票类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",resizable:!1,label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.title,callback:function(a){e.$set(t.row,"title",a)},expression:"scope.row.title"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"number",resizable:!1,label:"纳税人识别号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])})],1)],1),e._v(" "),a("div",{staticClass:"ty-listone"},[a("div",{staticClass:"ty-el-main"},[a("el-col",{attrs:{span:12}},[a("i",{staticClass:"el-icon-date"}),e._v("其他信息")])],1),e._v(" "),a("div",{staticClass:"el-el-main-input"},[a("el-form",[a("el-form-item",{attrs:{label:"备注："}},[a("el-input",{attrs:{placeholder:"备注信息"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1)],1)])]),e._v(" "),a("el-footer",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.footerShow,expression:"footerShow"}],staticClass:"ty-right-anniu"},[a("el-button",{on:{click:e.confirstatus}},[e._v("确认下单")]),e._v(" "),a("el-button",{on:{click:e.goBack}},[e._v("取消")])],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(s,r,!1,function(e){a("HkMy"),a("BUf0")},"data-v-36e3b97e",null);t.default=n.exports}});
//# sourceMappingURL=15.c6e2e7a73964c7acf0d1.js.map