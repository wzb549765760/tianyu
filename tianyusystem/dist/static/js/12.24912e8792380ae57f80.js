webpackJsonp([12],{AeB5:function(e,t){},B8M7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mtWM"),s=a.n(i),n={name:"orderlist",data:function(){return{formInline:{user:"",region:""},typeFlag:{today:!0,lastweek:!1,lastmonth:!1,all:!1},options:[{value:"1",label:"待服务"},{value:"2",label:"所有"},{value:"3",label:"已完成"}],dialogueList:[],dialogueListDetail:[],baseURl:"http://apitest.tianyushangyi.com",nameOrMobile:"",currentPage:1,currentSize:10,pageNum:0,currentPageDetail:1,currentSizeDetail:10,pageNumDetail:0,durationType:"today",updateTime:"",obj:null}},methods:{getDialogueList:function(){var e=this,t=localStorage.getItem("currentUser_token"),a={pageSize:e.currentSize,pageNum:e.currentPage,query:{duration:e.durationType,userInfo:e.nameOrMobile}},i=this.$loading({lock:!0,text:"加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s.a.defaults.headers.post.token=t,s()({method:"post",url:e.baseURl+"/chat/chatlist",data:a}).then(function(t){i.close(),0===t.data.code?(e.pageNum=t.data.data.total,e.dialogueList=t.data.data.rows,console.log(e.dialogueList)):e.$message({type:"info",message:"加载失败"})})},getDialogueListDetail:function(e){var t=this;e?t.obj=e:e=t.obj;var a=localStorage.getItem("currentUser_token");t.updateTime=e.start;var i={pageSize:t.currentSizeDetail,pageNum:t.currentPageDetail,query:{docterId:"",end:e.end,start:e.start,userId:e.userId}};s.a.defaults.headers.post.token=a;var n=this.$loading({lock:!0,text:"加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s()({method:"post",url:t.baseURl+"/chat/chatdetail",data:i}).then(function(e){n.close(),0===e.data.code?(t.pageNumDetail=e.data.data.total,t.dialogueListDetail=e.data.data.rows):t.$message({type:"info",message:"加载失败"})})},changeTypeGetList:function(e){if("nameOrMobile"!=e){if(this.typeFlag[e])return;this.typeFlag={today:!1,lastweek:!1,lastmonth:!1,all:!1},this.typeFlag[e]=!0,this.durationType=e}this.currentPage=1,this.currentSize=10,this.currentPageDetail=1,this.currentSizeDetail=10,this.dialogueListDetail=[],this.updateTime="",this.getDialogueList()},handleCurrentChange:function(e){this.currentPage=e,this.getDialogueList()},handleCurrentChangeDetail:function(e){this.currentPageDetail=e,this.getDialogueListDetail()},handleSizeChange:function(e){this.currentSize=e,this.getDialogueList()},handleSizeChangeDetail:function(e){this.currentSizeDetail=e,this.getDialogueListDetail()}},mounted:function(){this.getDialogueList()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"orderlist"},[a("el-header",{staticStyle:{height:"100%"}},[a("el-row",[a("div",{staticClass:"ty-header-list2"},[a("el-col",{attrs:{span:24}},[a("i",{staticClass:"el-icon-search"}),e._v(" 筛选查询")])],1),e._v(" "),a("div",{staticClass:"ty-header-list3"},[a("div",{staticClass:"ty-shaoxuan-content"},[a("div",{staticClass:"ty-shaixuan-list1"},[a("span",[e._v("用户名称：")]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"})]),e._v(" "),a("el-input",{staticClass:"searchBox",attrs:{placeholder:"用户名/用户手机号"},model:{value:e.nameOrMobile,callback:function(t){e.nameOrMobile=t},expression:"nameOrMobile"}})],1),e._v(" "),a("el-button",{on:{click:function(t){e.changeTypeGetList("nameOrMobile")}}},[e._v("筛选")])],1)])])],1),e._v(" "),a("el-main",[a("div",{staticClass:"ty-header-list22"},[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple ty-el-main-4",class:e.typeFlag.today?"typeselect":"",on:{click:function(t){e.changeTypeGetList("today")}}},[e._v("今天\n        ")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple ty-el-main-4",class:e.typeFlag.lastweek?"typeselect":"",on:{click:function(t){e.changeTypeGetList("lastweek")}}},[e._v("最近一周\n        ")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple ty-el-main-4",class:e.typeFlag.lastmonth?"typeselect":"",on:{click:function(t){e.changeTypeGetList("lastmonth")}}},[e._v("最近一个月\n        ")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"grid-content bg-purple ty-el-main-4",class:e.typeFlag.all?"typeselect":"",on:{click:function(t){e.changeTypeGetList("all")}}},[e._v("全部\n        ")])])],1),e._v(" "),a("div",{staticClass:"ty-serve"},[a("div",{staticClass:"ty-serve-left"},e._l(e.dialogueList,function(t){return a("div",{staticClass:"ty-serve-list",on:{click:function(a){e.getDialogueListDetail(t)}}},[a("div",{staticClass:"ty-name-span"},[a("span",[e._v(e._s(t.userName))]),a("span",[e._v(e._s(t.docterName))])]),e._v(" "),a("div",{staticClass:"ty-time-p"},[a("p",[e._v("开始时间"),a("span",[e._v(e._s(t.start))])]),e._v(" "),a("p",[e._v("结束时间"),a("span",[e._v(e._s(t.end)+" ")])])])])})),e._v(" "),a("div",{staticClass:"ty-serve-right"},[a("div",{staticClass:"ty-serve-list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.updateTime,expression:"updateTime"}],staticClass:"ty-right-time"},[a("span",[e._v(e._s(e.updateTime))])]),e._v(" "),e._l(e.dialogueListDetail,function(t){return a("div",{staticClass:"ty-right-neirong"},[a("p",[e._v(e._s(t.name)+" "+e._s(t.updateDate))]),e._v(" "),a("p",[e._v(e._s(t.message))])])})],2)])])]),e._v(" "),a("el-footer",{staticClass:"ty-footer"},[a("div",{staticClass:"ty-foot-lef"},[a("div",{staticClass:"pages"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":10,background:"",layout:"sizes,prev, pager, next",total:e.pageNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)]),e._v(" "),a("div",{staticClass:"ty-foot-rig"},[a("div",{staticClass:"pages"},[a("el-pagination",{attrs:{"current-page":e.currentPageDetail,"page-sizes":[10,20,30,40],"page-size":10,background:"",layout:"sizes,prev, pager, next",total:e.pageNumDetail},on:{"size-change":e.handleSizeChangeDetail,"current-change":e.handleCurrentChangeDetail,"update:currentPage":function(t){e.currentPageDetail=t}}})],1)])])],1)},staticRenderFns:[]};var r=a("VU/8")(n,l,!1,function(e){a("eJJW"),a("AeB5")},"data-v-79f61b8e",null);t.default=r.exports},eJJW:function(e,t){}});
//# sourceMappingURL=12.24912e8792380ae57f80.js.map