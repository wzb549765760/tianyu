webpackJsonp([23],{Zta2:function(t,e){},"s9/b":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mtWM"),s=i.n(a),o=i("mw3O"),l=i.n(o),r={data:function(){return{order:0,fileList:[],dialogImageUrl:"",dialogVisible:!1,mainHomePicList:[],productPicList:[],doctorPicList:[],connectPicList:[],baseURl:"http://apitest.tianyushangyi.com",headers:{token:localStorage.getItem("currentUser_token")},upData:{type:3},flag:!1}},name:"PicChange",methods:{handleUrlSuccess:function(t,e,i,a){0==t.code&&(1==a?(this.mainHomePicList.push({img:t.data.url}),this.flag=!0):2==a?(this.productPicList.push({img:t.data.url}),this.flag=!0):3==a?(this.doctorPicList.push({img:t.data.url}),this.flag=!0):4==a&&(this.connectPicList.push({img:t.data.url}),this.flag=!0))},handleError:function(t,e){this.$message.warning("当前限制选择 1个文件，请上传后添加")},handleRemove:function(t,e){},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/jpg"===t.type,i=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG/PNG/JPEG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&i},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},getMainHomePic:function(t){var e=this,i=localStorage.getItem("currentUser_token"),a={type:t,pageNum:1,pageSize:100};s.a.defaults.headers.get.token=i,s()({method:"post",url:e.baseURl+"/resource/list",data:l.a.stringify(a)}).then(function(i){0==i.data.code?1==t?(e.mainHomePicList=i.data.data.rows,e.order=e.mainHomePicList[e.mainHomePicList.length-1].order):2==t?(e.productPicList=i.data.data.rows,e.order=e.productPicList[e.productPicList.length-1].order):3==t?(e.doctorPicList=i.data.data.rows,e.order=e.doctorPicList[e.doctorPicList.length-1].order):4==t&&(e.connectPicList=i.data.data.rows,e.order=e.connectPicList[e.connectPicList.length-1].order):e.$message({showClose:!0,message:"获取失败",type:"error"})})},upload1:function(t){var e=this;if(e.order++,e.flag){e.fileList=[];var i=localStorage.getItem("currentUser_token"),a="";1==t?a=e.mainHomePicList[e.mainHomePicList.length-1].img:2==t?a=e.productPicList[e.productPicList.length-1].img:3==t?a=e.doctorPicList[e.doctorPicList.length-1].img:4==t&&(a=e.connectPicList[e.connectPicList.length-1].img);var o={type:t,img:a,order:e.order};s.a.defaults.headers.post.token=i,s()({method:"post",url:e.baseURl+"/resource/add",data:l.a.stringify(o)}).then(function(i){0==i.data.code?(e.$message({showClose:!0,message:"上传成功",type:"success"}),e.getMainHomePic(t),e.flag=!1):e.$message({showClose:!0,message:"上传失败",type:"error"})})}else e.$message({showClose:!0,message:"请先上传图片",type:"error"})},delete1:function(t,e){var i=this,a=localStorage.getItem("currentUser_token"),o={id:t};s.a.defaults.headers.post.token=a,s()({method:"post",url:i.baseURl+"/resource/delete",data:l.a.stringify(o)}).then(function(t){1==e?i.getMainHomePic(1):2==e?i.getMainHomePic(2):3==e?i.getMainHomePic(3):4==e&&i.getMainHomePic(4)})}},mounted:function(){for(var t=0;t<4;t++)this.getMainHomePic(t+1)},updated:function(){console.log(this.mainHomePicList)}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",{staticClass:"catalogue"},[i("el-row",{staticStyle:{width:"100%"}},[i("h3",[t._v("首页动图管理")]),t._v(" "),t._l(t.mainHomePicList,function(e,a){return i("el-col",{key:a,attrs:{span:4,offset:a>0?.8:0}},[i("el-card",{staticStyle:{"max-height":"230px",position:"relative"},attrs:{"body-style":{padding:"0px"}}},[i("img",{staticClass:"image",attrs:{src:e.img}}),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("div",{staticClass:"bottom clearfix"},[i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){t.delete1(e.id,1)}}},[t._v("X")])],1)])])],1)}),t._v(" "),i("el-upload",{attrs:{action:"http://apitest.tianyushangyi.com/file/upload","list-type":"picture-card",headers:t.headers,data:t.upData,limit:1,"before-upload":t.beforeAvatarUpload,"on-preview":t.handlePictureCardPreview,"on-success":function(e,i,a){t.handleUrlSuccess(e,i,a,1)},"on-remove":t.handleRemove,"on-exceed":t.handleError,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),i("el-button",{staticClass:"upload1",attrs:{type:"primary"},on:{click:function(e){t.upload1(1)}}},[t._v("上传")])],2)],1),t._v(" "),i("el-container",{staticClass:"catalogue"},[i("el-row",{staticStyle:{width:"100%"}},[i("h3",[t._v("产品与服务页动图")]),t._v(" "),t._l(t.productPicList,function(e,a){return i("el-col",{key:a,attrs:{span:4,offset:a>0?.8:0}},[i("el-card",{staticStyle:{"max-height":"230px",position:"relative"},attrs:{"body-style":{padding:"0px"}}},[i("img",{staticClass:"image",attrs:{src:e.img}}),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("div",{staticClass:"bottom clearfix"},[i("span",{staticStyle:{"font-size":"12px",color:"#333333"}}),t._v(" "),i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){t.delete1(e.id,2)}}},[t._v("X")])],1)])])],1)}),t._v(" "),i("el-upload",{attrs:{action:"http://apitest.tianyushangyi.com/file/upload","list-type":"picture-card",headers:t.headers,data:t.upData,limit:1,"before-upload":t.beforeAvatarUpload,"on-preview":t.handlePictureCardPreview,"on-success":function(e,i,a){t.handleUrlSuccess(e,i,a,2)},"on-remove":t.handleRemove,"on-exceed":t.handleError,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),i("el-button",{staticClass:"upload1",attrs:{type:"primary"},on:{click:function(e){t.upload1(2)}}},[t._v("上传")])],2)],1),t._v(" "),i("el-container",{staticClass:"catalogue"},[i("el-row",{staticStyle:{width:"100%"}},[i("h3",[t._v("医生与医院动图管理")]),t._v(" "),t._l(t.doctorPicList,function(e,a){return i("el-col",{key:a,attrs:{span:4,offset:a>0?.8:0}},[i("el-card",{staticStyle:{"max-height":"230px",position:"relative"},attrs:{"body-style":{padding:"0px"}}},[i("img",{staticClass:"image",attrs:{src:e.img}}),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("div",{staticClass:"bottom clearfix"},[i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){t.delete1(e.id,3)}}},[t._v("X")])],1)])])],1)}),t._v(" "),i("el-upload",{attrs:{action:"http://apitest.tianyushangyi.com/file/upload","list-type":"picture-card",headers:t.headers,data:t.upData,limit:1,"before-upload":t.beforeAvatarUpload,"on-preview":t.handlePictureCardPreview,"on-success":function(e,i,a){t.handleUrlSuccess(e,i,a,3)},"on-remove":t.handleRemove,"on-exceed":t.handleError,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),i("el-button",{staticClass:"upload1",attrs:{type:"primary"},on:{click:function(e){t.upload1(3)}}},[t._v("上传")])],2)],1),t._v(" "),i("el-container",{staticClass:"catalogue"},[i("el-row",{staticStyle:{width:"100%"}},[i("h3",[t._v("联系我们动图管理")]),t._v(" "),t._l(t.connectPicList,function(e,a){return i("el-col",{key:a,attrs:{span:4,offset:a>0?.8:0}},[i("el-card",{staticStyle:{"max-height":"230px",position:"relative"},attrs:{"body-style":{padding:"0px"}}},[i("img",{staticClass:"image",attrs:{src:e.img}}),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("div",{staticClass:"bottom clearfix"},[i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){t.delete1(e.id,4)}}},[t._v("X")])],1)])])],1)}),t._v(" "),i("el-upload",{attrs:{action:"http://apitest.tianyushangyi.com/file/upload","list-type":"picture-card",headers:t.headers,data:t.upData,limit:1,"before-upload":t.beforeAvatarUpload,"on-preview":t.handlePictureCardPreview,"on-success":function(e,i,a){t.handleUrlSuccess(e,i,a,4)},"on-remove":t.handleRemove,"on-exceed":t.handleError,"file-list":t.fileList}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})]),t._v(" "),i("el-button",{staticClass:"upload1",attrs:{type:"primary"},on:{click:function(e){t.upload1(4)}}},[t._v("上传")])],2)],1)],1)},staticRenderFns:[]};var n=i("VU/8")(r,c,!1,function(t){i("Zta2")},"data-v-832cf87a",null);e.default=n.exports}});
//# sourceMappingURL=23.b40c419e84cb5999ae87.js.map