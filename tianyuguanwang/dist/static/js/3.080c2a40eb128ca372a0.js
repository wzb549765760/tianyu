webpackJsonp([3],{"9bBU":function(e,s,a){a("mClu");var t=a("FeBl").Object;e.exports=function(e,s,a){return t.defineProperty(e,s,a)}},C4MV:function(e,s,a){e.exports={default:a("9bBU"),__esModule:!0}},Qgef:function(e,s){},bOdI:function(e,s,a){"use strict";s.__esModule=!0;var t,i=a("C4MV"),o=(t=i)&&t.__esModule?t:{default:t};s.default=function(e,s,a){return s in e?(0,o.default)(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}},mClu:function(e,s,a){var t=a("kM2E");t(t.S+t.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},mvHQ:function(e,s,a){e.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(e,s,a){var t=a("FeBl"),i=t.JSON||(t.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},x2Ue:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a("mvHQ"),i=a.n(t),o=a("bOdI"),d=a.n(o),r={name:"orders",data:function(){var e;return{updateName:"",updateMobile:"",updateAddress:"",num:"12345678978945612",params:this.$route.params,addOrAddFlag:!1,pay_ace1:!0,pay_ace2:!1,checked:!1,headers:{token:this.Cookies.get("token")},upData:{type:1},fileList:[],isShow:!0,radio:"个人",radioSex:"1",invoiceShow:!1,currentPage1:1,currentSize:100,age:"",url:this.$store.state.vuexs.url,dataAddressLists:[],addressListFlag:!1,updataAddFlag:"",orderInfo:(e={address:{id:"",mobile:"",name:"",address:""},payType:"在线支付",isInvoice:!1,invoice:{type:"增值税普通发票",title:"个人",name:"",content:"",number:""},commodityType:"",commodityId:this.$route.params.commodityId,specificationId:this.$route.params.specificationId},d()(e,"commodityType",this.$route.params.commodityType),d()(e,"source","pc"),d()(e,"count",1),e),dataList:{}}},created:function(){this.$route.params.commodityId?(this.params=this.$route.params,this.$store.state.vuexs.orderP1=this.$route.params):this.params=this.$store.state.vuexs.orderP1},methods:{payKindTab1:function(){this.pay_ace1=!0,this.pay_ace2=!1,this.orderInfo.payType="在线支付"},updateData:function(e){this.updataAddFlag=e,this.addOrAddFlag=!0,this.updateName=this.orderInfo.address.name,this.updateMobile=this.orderInfo.address.mobile,this.updateAddress=this.orderInfo.address.address},addData:function(e){this.updataAddFlag=e,this.addOrAddFlag=!0,this.updateName="",this.updateMobile="",this.updateAddress=""},addDataSubmit:function(){var e=this,s={};s.name=this.updateName,s.mobile=this.updateMobile,s.address=this.updateAddress,s.default=!1,e.axios.defaults.headers.post.token=e.Cookies.get("token"),e.axios({method:"post",url:e.url+"/address/add",data:e.qs.stringify(s)}).then(function(s){0==s.data.code&&(e.addOrAddFlag=!1,e.updateName="",e.updateMobile="",e.updateAddress="",e.getServes())})},updateDataSubmit:function(){var e=this;if(""!=this.updateName&&null!=this.updateName&&void 0!=this.updateName)if(""!=this.updateMobile&&null!=this.updateMobile&&void 0!=this.updateMobile)if(""!=this.updateAddress&&null!=this.updateAddress&&void 0!=this.updateAddress){"add"==this.updataAddFlag&&this.addDataSubmit();var s=this.orderInfo.address.id,a={};this.dataAddressLists.forEach(function(e){e.id==s&&(a=e)}),a.name=this.updateName,a.mobile=this.updateMobile,a.address=this.updateAddress,e.axios.defaults.headers.post.token=e.Cookies.get("token"),e.axios({method:"post",url:e.url+"/address/update",data:e.qs.stringify(a)}).then(function(s){0==s.data.code?(e.addOrAddFlag=!1,e.updateName="",e.updateMobile="",e.updateAddress="",e.getServes()):e.$message({showClose:!0,message:"请更改信息",type:"error"})})}else e.$message({showClose:!0,message:"收货人地址不能为空",type:"error"});else e.$message({showClose:!0,message:"收货人手机号不能为空",type:"error"});else e.$message({showClose:!0,message:"收货人姓名不能为空",type:"error"})},updateDataClose:function(){this.addOrAddFlag=!1,this.updateName="",this.updateMobile="",this.updateAddress=""},payKindTab2:function(){this.pay_ace1=!1,this.pay_ace2=!0,this.orderInfo.payType="对公转账"},choiceAddress:function(e){var s=this.dataAddressLists;s.forEach(function(e,s){e.borderStyleFlag=!1}),s[e].borderStyleFlag=!0,this.dataAddressLists=s},addressListSure:function(){var e=this,s=!0;this.dataAddressLists.forEach(function(a){a.borderStyleFlag&&(s=!1,e.orderInfo.address.name=a.name,e.orderInfo.address.id=a.id,e.orderInfo.address.mobile=a.mobile,e.orderInfo.address.address=a.address,e.addressListFlag=!1),a.borderStyleFlag=!1}),s&&e.$message({showClose:!0,message:"请选择一个地址",type:"error"})},handleRemove:function(e,s){console.log(e,s)},handleSuccess:function(e,s,a){console.log(e);0==e.code&&(this.orderInfo.servicepeople.idCardFrontPicFileId=e.data.url)},handlePreview:function(e){console.log(e)},handleExceed:function(e,s){s=[],this.$message.warning("当前限制选择 1个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+s.length)+" 个文件")},beforeRemove:function(e,s){return this.$confirm("确定移除 "+e.name+"？")},tabChange:function(){this.isShow=!this.isShow},checkChange:function(){console.log(this.orderInfo.isInvoice),1==this.orderInfo.isInvoice?this.invoiceShow=!0:this.invoiceShow=!1},radioChange:function(){console.log(this.radio)},invoiceHide:function(){this.invoiceShow=!1,this.checked=!1},invoiceHide1:function(){this.invoiceShow=!1,this.orderInfo.isInvoice=!1,this.checked=!1,this.orderInfo.invoice={type:"增值税普通发票",title:"",name:"",content:"",number:""}},getServes:function(){var e=this,s={pageNum:e.currentPage1,pageSize:e.currentSize};e.axios.defaults.headers.post.token=e.Cookies.get("token"),e.axios({method:"post",url:e.url+"/address/list",data:e.qs.stringify(s)}).then(function(s){if(console.log(s),0==s.data.code){var a=s.data.data.rows;a.forEach(function(s){s.borderStyleFlag=!1,1==s.default&&(e.dataList=s)}),e.dataAddressLists=a,console.log(e.dataList),"{}"==i()(e.dataList)?e.isShow=!1:(e.orderInfo.address.name=e.dataList.name,e.orderInfo.address.id=e.dataList.id,e.orderInfo.address.mobile=e.dataList.mobile,e.orderInfo.address.address=e.dataList.address)}})},submitOrder:function(){var e=this;console.log(e.orderInfo.address.name),e.orderInfo.address.name&&e.orderInfo.address.mobile&&e.orderInfo.address.address?(e.orderInfo.count=parseFloat(e.params.num),console.log(e.orderInfo),e.axios.defaults.headers.post.token=e.Cookies.get("token"),e.axios({method:"post",url:e.url+"/purchaseorder/addwithaddress",data:e.orderInfo}).then(function(s){console.log(s),0==s.data.code?"在线支付"==e.orderInfo.payType?(localStorage.setItem("price",e.params.num*e.params.specificationPrice),e.$router.push({name:"pay",params:{id:s.data.data.id,price:e.params.num*e.params.specificationPrice,no:s.data.data.no}})):e.$router.push({name:"transfer",params:{id:s.data.data.id,price:e.params.num*e.params.specificationPrice,no:s.data.data.no}}):e.$message({showClose:!0,message:s.data.desc,type:"error"})})):e.$message({showClose:!0,message:"请填写完整信息",type:"error"})}},filters:{numFilter:function(e){for(var s=e.length-5-4,a="",t=0;t<s;t++)a+="*";return e.substring(0,5)+a+e.substring(e.length-4)}},mounted:function(){this.getServes()}},n={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"orders-box"},[a("div",{staticClass:"orders-container"},[a("div",{staticClass:"addressMain"},[a("div",{staticClass:"tittle"},[e._v("收货地址")]),e._v(" "),a("div",{staticClass:"addressImfMain"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.dataAddressLists.length,expression:"dataAddressLists.length == 0"}],staticClass:"addressNull"},[e._v("暂无可用的收货地址，请添加")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.dataAddressLists.length,expression:"dataAddressLists.length != 0"}],staticClass:"addressDetailsMain"},[a("div",{staticClass:"addressDetail"},[e._v("收 货 人: "+e._s(e.orderInfo.address.name))]),e._v(" "),a("div",{staticClass:"addressDetail"},[e._v("联系方式: "+e._s(e.orderInfo.address.mobile))]),e._v(" "),a("div",{staticClass:"addressDetail"},[e._v("收货地址: "+e._s(e._f("numFilter")(e.orderInfo.address.address)))])]),e._v(" "),a("div",{staticClass:"bottomMain"},[a("div",{staticClass:"bottom",on:{click:function(s){e.addData("add")}}},[e._v("添加地址")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.dataAddressLists.length,expression:"dataAddressLists.length != 0"}],staticClass:"bottom",on:{click:function(s){e.addressListFlag=!0}}},[e._v("切换地址")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.dataAddressLists.length,expression:"dataAddressLists.length != 0"}],staticClass:"bottom1",on:{click:function(s){e.updateData("update")}}},[e._v("修改地址")])])])]),e._v(" "),a("span",{staticClass:"space-line"}),e._v(" "),a("span",{staticClass:"pay-title"},[e._v("支付方式")]),e._v(" "),a("div",{staticClass:"pay-kind"},[a("p",{class:{"pay-ace":e.pay_ace1},on:{click:e.payKindTab1}},[e._v("在线支付")]),e._v(" "),a("p",{class:{"pay-ace":e.pay_ace2},on:{click:e.payKindTab2}},[e._v("对公转账")]),e._v(" "),a("span",[e._v("高于20万只能使用对公转账，付款后，服务人员会与您联系，付款后提供服务")])]),e._v(" "),a("span",{staticClass:"space-line"}),e._v(" "),a("span",{staticClass:"pay-title"},[e._v("发票信息")]),e._v(" "),a("span",{staticClass:"pay-cl"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.isInvoice,expression:"orderInfo.isInvoice"}],staticClass:"pay-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.orderInfo.isInvoice)?e._i(e.orderInfo.isInvoice,null)>-1:e.orderInfo.isInvoice},on:{change:[function(s){var a=e.orderInfo.isInvoice,t=s.target,i=!!t.checked;if(Array.isArray(a)){var o=e._i(a,null);t.checked?o<0&&e.$set(e.orderInfo,"isInvoice",a.concat([null])):o>-1&&e.$set(e.orderInfo,"isInvoice",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(e.orderInfo,"isInvoice",i)},e.checkChange]}}),e._v("我需要发票")]),e._v(" "),a("span",{staticClass:"space-line"}),e._v(" "),a("span",{staticClass:"pay-title"},[e._v("商品")]),e._v(" "),a("div",{staticClass:"man-info2"},[a("table",{attrs:{cellspacing:"0"}},[e._m(0),e._v(" "),a("tr",[a("td",[a("img",{staticStyle:{width:"160px",height:"100px"},attrs:{src:e.params.image,alt:""}})]),e._v(" "),a("td",[e._v(e._s(e.params.name))]),e._v(" "),a("td",[e._v(e._s(e.params.specificationName))]),e._v(" "),a("td",[e._v(e._s(e.params.specificationPrice))]),e._v(" "),a("td",[e._v(e._s(e.params.num))]),e._v(" "),a("td",[e._v(e._s(e.params.num*e.params.specificationPrice))])])])]),e._v(" "),a("span",{staticClass:"space-line"}),e._v(" "),a("span",{staticClass:"pay-title"},[e._v("金额明细")]),e._v(" "),a("div",{staticClass:"pay-price"},[a("div",[e._v("商品总额 : "),a("span",{staticClass:"price1"},[e._v("¥ "+e._s(e.params.num*e.params.specificationPrice))])]),e._v(" "),a("div",[e._v("应付总额 : "),a("span",{staticClass:"price2"},[e._v("¥ "+e._s(e.params.num*e.params.specificationPrice))])]),e._v(" "),a("p",{on:{click:e.submitOrder}},[e._v("提交订单")])])]),e._v(" "),a("div",{staticClass:"home-footer"},[e._v("\n    Copyright © 天宇尚医, All Rights Reserved.   备案号：京ICP备18045115号-1\n  ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.invoiceShow,expression:"invoiceShow"}],staticClass:"invoice"},[a("div",{staticClass:"invoice-min"},[a("span",{staticClass:"invoice-title"},[e._v("发票类型 : 增值税普通发票")]),e._v(" "),a("span",{staticClass:"invoice-title"},[a("span",{staticStyle:{color:"#FF6555"}},[e._v("*")]),e._v("发票抬头 : \n              "),a("el-radio",{attrs:{label:"个人"},on:{change:e.radioChange},model:{value:e.orderInfo.invoice.title,callback:function(s){e.$set(e.orderInfo.invoice,"title",s)},expression:"orderInfo.invoice.title"}},[e._v("个人")]),e._v(" "),a("el-radio",{attrs:{label:"单位"},on:{change:e.radioChange},model:{value:e.orderInfo.invoice.title,callback:function(s){e.$set(e.orderInfo.invoice,"title",s)},expression:"orderInfo.invoice.title"}},[e._v("单位")])],1),e._v(" "),a("span",{staticClass:"invoice-title"},[e._v("发票内容 : "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.invoice.content,expression:"orderInfo.invoice.content"}],staticStyle:{height:"30px",width:"300px"},attrs:{type:"text"},domProps:{value:e.orderInfo.invoice.content},on:{input:function(s){s.target.composing||e.$set(e.orderInfo.invoice,"content",s.target.value)}}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"单位"==e.orderInfo.invoice.title,expression:"orderInfo.invoice.title == '单位'"}],staticClass:"invoice-title"},[a("span",{staticClass:"invoice-title"},[a("span",{staticStyle:{color:"#FF6555"}},[e._v("*")]),e._v("单位名称 : "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.invoice.name,expression:"orderInfo.invoice.name"}],staticStyle:{height:"30px"},attrs:{type:"text"},domProps:{value:e.orderInfo.invoice.name},on:{input:function(s){s.target.composing||e.$set(e.orderInfo.invoice,"name",s.target.value)}}})]),e._v(" "),a("span",{staticClass:"invoice-title"},[a("span",{staticStyle:{color:"#FF6555"}},[e._v("*")]),e._v("纳税人识别号 : "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.orderInfo.invoice.number,expression:"orderInfo.invoice.number"}],staticStyle:{height:"30px"},attrs:{type:"text"},domProps:{value:e.orderInfo.invoice.number},on:{input:function(s){s.target.composing||e.$set(e.orderInfo.invoice,"number",s.target.value)}}})])]),e._v(" "),a("div",{staticClass:"invoice-btn"},[a("p",{on:{click:e.invoiceHide}},[e._v("确定")]),e._v(" "),a("p",{on:{click:e.invoiceHide1}},[e._v("取消")])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.addOrAddFlag,expression:"addOrAddFlag"}],staticClass:"serves-add"},[a("div",{staticStyle:{width:"600px",height:"300px",position:"fixed",left:"50%",top:"50%",margin:"-150px 0 0 -300px"}},[a("div",[a("label",[e._v("收货人名称 : ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.updateName,expression:"updateName"}],attrs:{type:"text"},domProps:{value:e.updateName},on:{input:function(s){s.target.composing||(e.updateName=s.target.value)}}})]),e._v(" "),a("div",[a("label",[e._v("收货人手机号 : ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.updateMobile,expression:"updateMobile"}],attrs:{type:"text"},domProps:{value:e.updateMobile},on:{input:function(s){s.target.composing||(e.updateMobile=s.target.value)}}})]),e._v(" "),a("div",[a("label",[e._v("收货人地址 : ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.updateAddress,expression:"updateAddress"}],attrs:{type:"text"},domProps:{value:e.updateAddress},on:{input:function(s){s.target.composing||(e.updateAddress=s.target.value)}}})]),e._v(" "),a("div",{staticClass:"add-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updateDataSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.updateDataClose}},[e._v("取消")])],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.addressListFlag,expression:"addressListFlag"}],staticClass:"serves-add1"},[a("div",{staticClass:"choiceAddre"},[a("div",{staticClass:"tittle"},[e._v("选择收货地址")]),e._v(" "),a("div",{staticClass:"choiceAddressMain"},e._l(e.dataAddressLists,function(s,t){return a("div",{class:s.borderStyleFlag?"redBorder addressList":"addressList",on:{click:function(s){e.choiceAddress(t)}}},[a("div",{staticClass:"imfLine"},[a("span",{staticClass:"name"},[e._v("收 货 人 :")]),e._v(" "),a("span",{staticClass:"key"},[e._v(e._s(s.name))])]),e._v(" "),a("div",{staticClass:"imfLine"},[a("span",{staticClass:"name"},[e._v("联系方式 :")]),e._v(" "),a("span",{staticClass:"key"},[e._v(e._s(s.mobile))])]),e._v(" "),a("div",{staticClass:"imfLine"},[a("span",{staticClass:"name"},[e._v("收货地址 :")]),e._v(" "),a("span",{staticClass:"key"},[e._v(e._s(e._f("numFilter")(s.address)))])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:s.default,expression:"l.default"}],staticClass:"defaultAddress"},[e._v("默认地址")])])})),e._v(" "),a("div",{staticClass:"bottomDiv"},[a("span",{on:{click:function(s){e.addressListFlag=!1}}},[e._v("取消")]),e._v(" "),a("span",{on:{click:e.addressListSure}},[e._v("确定")])])])])])},staticRenderFns:[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("tr",[a("th",[e._v("商品图")]),e._v(" "),a("th",[e._v("商品名称")]),e._v(" "),a("th",[e._v("商品规格")]),e._v(" "),a("th",[e._v("单价")]),e._v(" "),a("th",[e._v("数量")]),e._v(" "),a("th",[e._v("合计")])])}]};var c=a("VU/8")(r,n,!1,function(e){a("Qgef")},"data-v-1baaf95c",null);s.default=c.exports}});
//# sourceMappingURL=3.080c2a40eb128ca372a0.js.map